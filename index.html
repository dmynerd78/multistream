<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Multi Chat</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="stream-gen">
        <div class="wrapper">
            <div class="input-group">
                <input type="text" placeholder="Username" required>
                <select>
                    <option value="twitch">Twitch</option>
                    <option value="mixer">Mixer</option>
                </select>
                <button onclick="addStream();">Add Stream</button>
                <button style="opacity: 0;">Remove</button>
            </div>

            <div class="input-group">
                <input type="text" placeholder="Username" required>
                <select>
                    <option value="twitch">Twitch</option>
                    <option value="mixer">Mixer</option>
                </select>
                <button onclick="addStream();">Add Stream</button>
                <button onclick="removeStream(this.parentElement);">Remove</button>
            </div>
        </div>

        <div id="extra-options">
            <span>Extra options
                <select class="noVideoChat">
                    <option></option>
                    <option value="novideo">No Video</option>
                    <option value="nochat">No Chat</option>
                </select>
            </span>
            <br>
            <span>No Banner <input type="checkbox" class="noBanner"></span>
        </div>
        <button id="submit" onclick="readInputStreams();">Submit</button>
    </div>

    <div id="stream-chats" class="hidden"></div>

    <script src="script.js"></script>
    <script src="stream.js"></script>
    <script>
        const STREAM_ROW = document.querySelector("#stream-gen .wrapper .input-group:nth-child(2)").cloneNode(true);

        // Example search: ?t:dmynerd78/t:CallMeCyber&novideo,nobanner
        var search = window.location.search.substr(1).split("&");
        var streams = search[0].split("+");
        if(search.length > 1) {
            var settings = search[1].split("+");
        } else {
            var settings = [];
        }
        console.log("Parsed arguments:");
        console.log(search);

        // Load streams from URL
        if(search[0] != "") {
            try {
                genColumns();
            } catch(e) {
                console.error(e);
                alert(e);
            }
        }
    </script>
</body>
</html>